# 🤖 AI 챗봇 프롬프트 설정 가이드

## 개요
PrayGround AI 챗봇은 Google Gemini API를 사용하여 교회 청년부 커뮤니티에 특화된 AI 어시스턴트 서비스를 제공합니다.

## 현재 설정된 시스템 프롬프트

### 기본 프롬프트
```
당신은 교회 청년부 커뮤니티 "PrayGround"의 친근하고 도움이 되는 AI 어시스턴트입니다.

🎯 **역할과 목적:**
- 교회 청년부 성도들의 커뮤니티 활동을 돕는 AI 어시스턴트
- 게시판, 캘린더, 공지사항 등 플랫폼 사용법 안내
- 교회 관련 질문과 신앙 생활에 대한 조언 제공
- 청년부 활동과 소그룹 모임에 대한 정보 제공

✨ **성격과 말투:**
- 친근하고 따뜻한 톤으로 대화
- 청년들의 눈높이에 맞는 편안한 말투
- 이모지를 적절히 사용하여 친근함 표현
- 존댓말을 사용하되 딱딱하지 않은 자연스러운 말투

🙏 **제공 가능한 도움:**
1. **플랫폼 사용법**: 게시글 작성, 일정 확인, 알림 설정 등
2. **교회 활동 정보**: 예배 시간, 소그룹 모임, 특별 행사 등
3. **신앙 생활 조언**: 성경 구절, 기도 제목, 신앙 고민 상담
4. **커뮤니티 활동**: 청년부 활동, 봉사 기회, 교제 활동 등
5. **기술 지원**: 웹사이트 사용 중 문제 해결

📝 **응답 가이드라인:**
- 항상 도움이 되고 건설적인 답변 제공
- 교회 교리나 신학적 문제는 신중하게 접근
- 개인적인 신앙 고민은 목회자 상담 권유
- 기술적 문제는 구체적이고 실용적인 해결책 제시
- 커뮤니티 규칙과 예의를 강조

💡 **특별 기능:**
- 성경 구절 인용 시 정확한 장절 표기
- 교회 일정이나 행사 관련 질문 시 캘린더 페이지 안내
- 게시판 사용법 문의 시 단계별 가이드 제공
- 기도 제목이나 간증 공유 시 적절한 게시판 카테고리 추천

항상 사랑과 은혜로 가득한 답변을 해주세요! 🕊️
```

## 프롬프트 수정 방법

### 1. 기본 프롬프트 수정
`lib/gemini.ts` 파일의 `systemPrompt` 속성을 수정:

```typescript
// lib/gemini.ts
this.systemPrompt = `여기에 새로운 프롬프트 입력`
```

### 2. 동적 프롬프트 변경
코드에서 실시간으로 프롬프트 변경:

```typescript
import { getGeminiService } from '@/lib/gemini'

const geminiService = getGeminiService()

// 새로운 프롬프트 설정
geminiService.setSystemPrompt(`새로운 시스템 프롬프트`)

// 현재 프롬프트 확인
const currentPrompt = geminiService.getSystemPrompt()
```

### 3. 프리셋 프롬프트 사용
미리 정의된 프롬프트 프리셋 사용:

```typescript
const geminiService = getGeminiService()

// 기술 지원 모드
geminiService.usePresetPrompt('technical')

// 신앙 상담 모드
geminiService.usePresetPrompt('spiritual')

// 커뮤니티 활동 모드
geminiService.usePresetPrompt('community')

// 기본 모드로 복귀
geminiService.usePresetPrompt('default')
```

## 프리셋 프롬프트 종류

### 1. Technical (기술 지원)
- 웹사이트 사용법 전문 안내
- 기능 설명 및 문제 해결
- 정확하고 구체적인 기술 지원

### 2. Spiritual (신앙 상담)
- 성경 말씀 및 기도 제목
- 신앙 고민 상담
- 따뜻하고 지혜로운 조언

### 3. Community (커뮤니티 활동)
- 소그룹 모임 및 봉사 활동
- 교제 활동 참여 독려
- 활발하고 긍정적인 톤

## 프롬프트 최적화 팁

### 1. 명확한 역할 정의
```
당신은 [구체적인 역할]입니다.
[목적과 기능을 명확히 서술]
```

### 2. 성격과 말투 설정
```
✨ **성격과 말투:**
- [구체적인 성격 특성]
- [말투와 톤 가이드라인]
- [이모지 사용 규칙]
```

### 3. 제공 서비스 명시
```
🙏 **제공 가능한 도움:**
1. [서비스 1]: [구체적 설명]
2. [서비스 2]: [구체적 설명]
```

### 4. 응답 가이드라인
```
📝 **응답 가이드라인:**
- [해야 할 것들]
- [하지 말아야 할 것들]
- [특별 주의사항]
```

## 실제 사용 예시

### 챗봇과 대화 테스트
1. 웹사이트 우하단의 오렌지 챗봇 버튼 클릭
2. 다음과 같은 질문들로 테스트:

**웹사이트 기능 관련:**
- "게시글은 어떻게 작성하나요?"
- "익명으로 글을 쓸 수 있나요?"
- "선교사님 후원은 어떻게 하나요?"

**청년부 일정 관련:**
- "청년부 예배 시간이 언제인가요?"
- "다락방 모임은 언제 시작하나요?"
- "청년부 모임 후에 뭐가 있나요?"

**성경 관련:**
- "히브리서 10장 25절 말씀을 알려주세요"
- "청년부가 모이는 이유가 뭔가요?"
- "성경에서 교제에 관한 말씀을 찾아주세요"

**청년부 활동 관련:**
- "청년부에서 어떤 운동을 할 수 있나요?"
- "풋살 동아리에 대해 알려주세요"
- "다락방이 몇 개나 있나요?"

**교역자 및 섬김이 관련:**
- "청년부 목사님이 누구신가요?"
- "청년부 위원장이 누구인가요?"
- "교역자진 구성을 알려주세요"

### 프롬프트 효과 확인
- **친근한 톤**: 이모지와 따뜻한 말투 사용
- **교회 특화**: 신앙 관련 질문에 적절한 답변
- **기능 안내**: 플랫폼 사용법 상세 설명
- **커뮤니티 정신**: 참여와 교제 독려

## 환경 설정

### Google Gemini API 키 설정
`.env.local` 파일에 API 키 추가:
```env
GOOGLE_GEMINI_API_KEY=your_api_key_here
```

### API 키 발급 방법
1. [Google AI Studio](https://makersuite.google.com/app/apikey) 접속
2. "Create API Key" 클릭
3. 생성된 키를 `.env.local`에 추가

## 고급 설정

### 1. 생성 매개변수 조정
`lib/gemini.ts`의 `generationConfig` 수정:

```typescript
generationConfig: {
  temperature: 0.7,      // 창의성 (0.0-1.0)
  topK: 40,             // 토큰 선택 범위
  topP: 0.95,           // 누적 확률 임계값
  maxOutputTokens: 1024, // 최대 출력 토큰
}
```

### 2. 안전 설정 조정
유해 콘텐츠 필터링 수준 조정:

```typescript
safetySettings: [
  {
    category: "HARM_CATEGORY_HARASSMENT",
    threshold: "BLOCK_MEDIUM_AND_ABOVE" // 또는 BLOCK_LOW_AND_ABOVE
  }
]
```

### 3. 컨텍스트 길이 관리
긴 대화 시 토큰 제한을 위한 메시지 요약:

```typescript
// 메시지가 너무 많을 때 요약
if (messages.length > 10) {
  // 최근 5개 메시지만 유지
  messages = messages.slice(-5)
}
```

## 트러블슈팅

### 1. API 키 오류
- `.env.local` 파일 확인
- API 키 유효성 검증
- 할당량 및 사용량 확인

### 2. 응답 품질 개선
- 프롬프트 명확성 향상
- 예시 대화 추가
- 금지 사항 명시

### 3. 성능 최적화
- 토큰 수 제한
- 불필요한 컨텍스트 제거
- 캐싱 고려

이 가이드를 통해 교회 청년부 커뮤니티에 최적화된 AI 챗봇을 운영할 수 있습니다! 🚀
